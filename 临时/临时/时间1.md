
1. æ£€æŸ¥é…ç½®æ–‡ä»¶çš„Jacksonï¼Œæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼Œæ•°æ®åº“æ—¶åŒº
2. æ£€æŸ¥dao.xml
3. æ£€æŸ¥ ObjectMapper
4. æ£€æŸ¥æ­£å¸¸é¡µé¢çš„å‰ç«¯æ—¶é—´ä¼ çš„æ ¼å¼ï¼Œæ£€æŸ¥æ‰“åˆ†å‰ç«¯ä¼ çš„æ—¶é—´æ ¼å¼
5. æ£€æŸ¥æ­£å¸¸é¡µé¢çš„åç«¯å“åº”çš„æ—¶é—´æ ¼å¼ï¼Œæ£€æŸ¥æ‰“åˆ†åç«¯å“åº”çš„æ—¶é—´æ ¼å¼
6. æ£€æŸ¥æ˜¯ä¸æ˜¯å‰ç«¯æ—¶é—´æˆªå–å†™é”™äº†ï¼Œå¯¼è‡´è¢«ä¿®æ”¹ä¸ºä¸æ˜¯ISOæ ¼å¼


    @JsonFormat(
        pattern = "yyyy-MM-dd HH:mm:ss", 
        timezone = "GMT+8",
        shape = JsonFormat.Shape.STRING
    )

spring:
  jackson:
    time-zone: Asia/Shanghai

@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss", timezone = "GMT+8")
private LocalDateTime updateTime;





---

# ğŸ§© é—®é¢˜ 1ï¼šè¿”å›å‰ç«¯æ—¶é—´å°‘ 8 å°æ—¶ï¼ˆUTC â†” ä¸œå…«åŒºåç§»ï¼‰

## ğŸ§  åŸå› åˆ†æ

ä½ è¯´å¾—å¯¹ï¼š

> Java ä»æ•°æ®åº“è·å–æ—¶é—´æ˜¯æ­£ç¡®çš„ï¼ˆä¸œå…«åŒºï¼‰ï¼Œä½†è¿”å›å‰ç«¯æ—¶æˆäº† UTCã€‚

è¿™æ­£æ˜¯å› ä¸ºï¼š

- MyBatis ä» MySQL `datetime` å–å‡ºæ—¶ â†’ è½¬æˆ `java.util.Date`ï¼ˆæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼‰ï¼›
    
- ä½ åç«¯è¿è¡Œçš„ **JVM é»˜è®¤æ—¶åŒº = UTC**ï¼›
    
- Jackson åœ¨åºåˆ—åŒ–ï¼ˆè¿”å›å‰ç«¯ JSON æ—¶ï¼‰é»˜è®¤ä»¥ **UTC æ—¶åŒºè¾“å‡º ISO8601**ã€‚
    

å› æ­¤ï¼Œåºåˆ—åŒ–æ—¶ Jackson æŠŠä½  JVM å½“å‰æ—¶åŒºï¼ˆUTCï¼‰çš„æ—¶é—´è¾“å‡ºä¸ºï¼š

```
æ•°æ®åº“å­˜ 2025-10-14 10:00:00
â†“
Java å†…éƒ¨ new Date(2025-10-14T10:00:00+08:00)
â†“ Jackson ä»¥ UTC è¾“å‡º â†’
2025-10-14T02:00:00.000Z
```

---

## âœ… è§£å†³æ–¹æ¡ˆ

ä½ æœ‰ä¸¤ç§æ€è·¯ï¼ˆä»»é€‰ä¸€ç§ï¼‰ï¼š

### âœ… æ–¹æ¡ˆ 1ï¼šåœ¨ Spring Boot å…¨å±€è®¾ç½® Jackson æ—¶åŒºï¼ˆæ¨èï¼‰

åœ¨ `application.yml` é‡ŒåŠ ï¼š

```yaml
spring:
  jackson:
    time-zone: Asia/Shanghai
```

è¿™æ ·ï¼š

- Jackson åºåˆ—åŒ–æ—¶ä½¿ç”¨ä¸œå…«åŒºï¼›
    
- ä½ ä¸éœ€è¦åœ¨æ¯ä¸ªå­—æ®µåŠ  `@JsonFormat`ï¼›
    
- å‰ç«¯æ”¶åˆ°çš„å°±æ˜¯ä¸œå…«åŒºæ—¶é—´ï¼ˆISO æ ¼å¼æˆ–è‡ªå®šä¹‰æ ¼å¼ï¼‰ã€‚
    

---

### âœ… æ–¹æ¡ˆ 2ï¼šåœ¨ä»£ç ä¸­æ‰‹åŠ¨è®¾ç½® JVM é»˜è®¤æ—¶åŒº

å¦‚æœä½ ä¸æƒ³æ”¹é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨å¯åŠ¨ç±»é‡ŒåŠ ï¼š

```java
@PostConstruct
public void init() {
    TimeZone.setDefault(TimeZone.getTimeZone("Asia/Shanghai"));
}
```

æ•ˆæœä¸€æ ·ï¼šMyBatis è¯»å‡º â†’ Date â†’ Jackson è¾“å‡ºï¼Œå…¨éƒ¨ä¸œå…«åŒºä¸€è‡´ã€‚

---

# ğŸ§© é—®é¢˜ 2ï¼šåŠ äº† `@JsonFormat` åï¼Œåè€ŒæŠ¥é”™â€œä¸èƒ½æŠŠå¹´æœˆæ—¥æ—¶åˆ†ç§’å˜æˆ Dateâ€

é”™è¯¯åŸæ–‡ï¼š

> cannot deserialize value of type 'java.util.Date' from String "2025-10-14 10:00:00"

## ğŸ§  åŸå› åˆ†æ

### ğŸ”¹ ä½ éœ€è¦çŸ¥é“ä¸¤ç‚¹ï¼š

1. `@JsonFormat` åŒæ—¶ä½œç”¨äºï¼š
    
    - åºåˆ—åŒ–ï¼ˆè¿”å›å‰ç«¯ï¼‰
        
    - ååºåˆ—åŒ–ï¼ˆæ¥æ”¶å‰ç«¯ï¼‰
        
2. Jackson é»˜è®¤åªè¯†åˆ« ISO8601 æˆ–æ—¶é—´æˆ³ï¼Œä¸è¯†åˆ« `"yyyy-MM-dd HH:mm:ss"` è¿™ç§å­—ç¬¦ä¸² unless æ³¨å†Œäº† `SimpleDateFormat` æˆ–æ—¶é—´æ¨¡å—ã€‚
    

æ‰€ä»¥ï¼š

- ä½ åŠ äº† `@JsonFormat(pattern="yyyy-MM-dd HH:mm:ss")`ï¼›
    
- å‰ç«¯ä¼  `"2025-10-14 10:00:00"`ï¼›
    
- Jackson å°è¯•æŒ‰ä½ çš„ pattern è§£æï¼›
    
- ä½†é»˜è®¤çš„ `ObjectMapper` æ²¡æ³¨å†Œæ—¶é—´æ¨¡å—ï¼ˆ`JavaTimeModule`ï¼‰ï¼›
    
- æ‰€ä»¥ Jackson ä¸çŸ¥é“è¯¥æ€ä¹ˆæŠŠ `"2025-10-14 10:00:00"` è½¬æˆ `Date`ï¼›
    
- âŒ å°±æŠ›å‡ºäº† â€œcannot deserialize value of type java.util.Dateâ€ çš„å¼‚å¸¸ã€‚
    

---

## âœ… è§£å†³æ–¹æ¡ˆ

### âœ… æ–¹æ¡ˆ 1ï¼šåœ¨ Spring Boot å…¨å±€é…ç½® Jackson çš„æ—¥æœŸæ ¼å¼

åœ¨ `application.yml` ä¸­åŠ å…¥ï¼š

```yaml
spring:
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Shanghai
```

æ•ˆæœï¼š

- å‰ç«¯ä¼  `"yyyy-MM-dd HH:mm:ss"` â†’ èƒ½è‡ªåŠ¨ååºåˆ—åŒ–ï¼›
    
- åç«¯è¿”å›ä¹Ÿæ˜¯ `"yyyy-MM-dd HH:mm:ss"`ï¼›
    
- ä¸éœ€è¦æ¯ä¸ªå­—æ®µéƒ½å†™ `@JsonFormat`ï¼›
    
- å½»åº•ç»Ÿä¸€åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ ¼å¼ã€‚
    

---

### âœ… æ–¹æ¡ˆ 2ï¼šæ³¨å†Œ Jackson çš„ JavaTimeModuleï¼ˆä»£ç æ–¹å¼ï¼‰

å¦‚æœæ˜¯è‡ªå®šä¹‰é…ç½®ç±»ï¼š

```java
@Configuration
public class JacksonConfig {

    @Bean
    public ObjectMapper objectMapper() {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JavaTimeModule());
        mapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));
        mapper.setTimeZone(TimeZone.getTimeZone("Asia/Shanghai"));
        mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);
        return mapper;
    }
}
```

è¿™æ · Jackson èƒ½æ­£ç¡®è§£æ `"yyyy-MM-dd HH:mm:ss"` æ ¼å¼çš„å­—ç¬¦ä¸² â†’ `java.util.Date`ã€‚

---

### âœ… æ–¹æ¡ˆ 3ï¼ˆæ›´ç°ä»£ã€æ¨èï¼‰ï¼šæ”¹æˆ `LocalDateTime` è€Œä¸æ˜¯ `Date`

```java
@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss", timezone = "GMT+8")
private LocalDateTime updateTime;
```

`LocalDateTime` æ˜¯ JDK8 æ—¶é—´ç±»å‹ï¼Œä¸å¸¦æ—¶åŒºï¼Œé…åˆ Jackson è‡ªåŠ¨æ”¯æŒåºåˆ—åŒ–ä¸ååºåˆ—åŒ– `"yyyy-MM-dd HH:mm:ss"`ã€‚  
æ¯” `java.util.Date` ç¨³å®šã€æ— æ—¶åŒºåç§»ã€æ— â€œå‡8å°æ—¶â€é—®é¢˜ã€‚

---

# âœ… æœ€ç»ˆæ¨èç»„åˆï¼ˆæœ€ç¨³ï¼‰

å¦‚æœä½ ç°åœ¨åœ¨ä¸€ä¸ª Spring Boot é¡¹ç›®é‡Œï¼Œæˆ‘å»ºè®®è¿™æ ·ç»Ÿä¸€ï¼š

### ğŸ”§ application.yml

```yaml
spring:
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Shanghai
```

### ğŸ“¦ å®ä½“ç±»

```java
// æ¨èç”¨ LocalDateTimeï¼Œé¿å… Date çš„ UTC å½±å“
@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
private LocalDateTime updateTime;
```

---

# ğŸ§¾ æ€»ç»“è¡¨

|é—®é¢˜|åŸå› |è§£å†³æ–¹æ¡ˆ|
|---|---|---|
|è¿”å›æ—¶é—´å°‘ 8 å°æ—¶|Jackson åºåˆ—åŒ–é»˜è®¤ä½¿ç”¨ UTC|`spring.jackson.time-zone=Asia/Shanghai`|
|åŠ  @JsonFormat æŠ¥é”™|Jackson ååºåˆ—åŒ–ä¸äº†è‡ªå®šä¹‰æ ¼å¼å­—ç¬¦ä¸²|åœ¨å…¨å±€é…ç½® date-format æˆ–æ³¨å†Œ JavaTimeModule|
|æƒ³ç»Ÿä¸€æ ¼å¼|Date/LocalDateTime åºåˆ—åŒ–æ ¼å¼ä¸ä¸€è‡´|`spring.jackson.date-format` ç»Ÿä¸€é…ç½®|
|æƒ³é¿å…æ—¶åŒºé—®é¢˜|Date æœ‰ UTC åç§»|æ”¹ç”¨ `LocalDateTime`|

---

è¦ä¸è¦æˆ‘å¸®ä½ çœ‹ä¸‹ï¼šä½ ç°åœ¨è¿™ä¸ªé¡¹ç›®ç”¨çš„æ˜¯ Spring Boot 2 è¿˜æ˜¯ 3ï¼Ÿï¼ˆå› ä¸º 3.x é»˜è®¤ ObjectMapper æ³¨å†Œé€»è¾‘ä¸å¤ªä¸€æ ·ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™æœ€é€‚é…çš„é…ç½®ç±»ã€‚ï¼‰