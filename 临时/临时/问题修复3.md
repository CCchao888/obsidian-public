


# 🛠 CXF → SpringMVC 注解改造对照表

|旧写法（CXF / JAX-RS）|新写法（SpringMVC）|含义 / 区别|注意点|
|---|---|---|---|
|`@QueryParam("name") String name`|`@RequestParam(name = "name", required = false) String name`|从 URL 查询参数获取|Spring 默认 `required=true`，如果允许不传，要写 `required = false`|
|**参数无注解**（例如 `String name`）|（1）`@RequestParam(required = false)`（2）`@ModelAttribute` 对象绑定|JAX-RS 默认支持 query/form 绑定|SpringMVC 如果不写注解，行为不一：简单类型默认是 `@RequestParam`，对象默认是 `@ModelAttribute`|
|`@PathParam("id") Long id`|`@PathVariable("id") Long id`|从 URL 路径变量获取|例：`/user/{id}`|
|`@FormParam("age") int age`|`@RequestParam("age") int age`|从表单字段获取|POST 表单 `x-www-form-urlencoded`|
|`@HeaderParam("token") String token`|`@RequestHeader("token") String token`|从 HTTP Header 获取|SpringMVC 强调区分 Header 和 Param|
|`@CookieParam("sid") String sid`|`@CookieValue("sid") String sid`|从 Cookie 获取||
|`@Consumes(MediaType.APPLICATION_JSON)` + `User user`|`@RequestBody User user`|请求体 JSON 绑定到对象|记得看前端 `Content-Type`|
|`@Consumes(MediaType.APPLICATION_FORM_URLENCODED)` + `User user`|`@ModelAttribute User user` 或多个 `@RequestParam`|表单绑定|不要加 `@RequestBody`|
|`@Produces(MediaType.APPLICATION_JSON)`|`@ResponseBody` 或 `@RestController` 类级别|响应 JSON|Spring 默认用 `@RestController` 更简洁|

---

# 🚩 常见坑点对比

1. **允许参数不传**
    
    - JAX-RS：`@QueryParam` 默认可选，没传就是 `null`。
        
    - SpringMVC：`@RequestParam` 默认必须传，否则报错。  
        👉 解决：写 `@RequestParam(required = false)`。
        
2. **无注解参数**
    
    - JAX-RS：可以从 query/form 自动绑定。
        
    - SpringMVC：
        
        - 简单类型（String/int...） → 默认等价于 `@RequestParam`。
            
        - 对象（User/DTO） → 默认等价于 `@ModelAttribute`，从 query/form 里绑定。
            
3. **POST JSON**
    
    - JAX-RS：无注解时也能自动绑定 body。
        
    - SpringMVC：必须写 `@RequestBody` 才会去解析 JSON。否则对象全是 null。
        
4. **FeignClient 映射**
    
    - Feign 里必须保持和 Controller 一致：
        
        - `@RequestParam` → 对应 query 参数。
            
        - `@PathVariable` → 对应路径。
            
        - `@RequestBody` → 对应 body。
            
    - 如果 Controller 写了 `@RequestParam(required=false)`，Feign 方法也要写一致，否则会报错。
        

---

# ✅ 建议迁移策略

- **GET 请求**：大部分参数 → `@RequestParam(required=false)`。
    
- **POST JSON 请求**：参数对象 → `@RequestBody`。
    
- **POST 表单请求**：对象 → `@ModelAttribute`。
    
- **路径变量**：统一用 `@PathVariable`。
    
- **Header / Cookie**：用 `@RequestHeader`、`@CookieValue`。
    
