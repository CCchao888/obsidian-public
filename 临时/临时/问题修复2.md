

## 1. **POST 请求时，方法参数不加 @RequestBody 可以吗？**

可以的 ✅

区别在于 Spring MVC 会把「请求数据」解析方式不一样：

- **不加 @RequestBody**
    
    - 如果参数是简单类型（`String`、`int`、`Long` 等），Spring 默认从：
        
        - Query 参数（`?id=1`）
            
        - 或者表单参数（`form-data`，`x-www-form-urlencoded`）  
            里取值。
            
    - 如果参数是对象（POJO），Spring 会把表单参数/Query 参数 **按字段名映射** 到对象属性（相当于 `@ModelAttribute`）。
        

👉 不会自动从 JSON body 里解析。

---

- **加上 @RequestBody**
    
    - Spring 会直接把请求体（JSON / XML）**整体反序列化**成参数对象。
        
    - 这时候参数必须来自请求体，Query 参数/表单参数就不会再起作用。
        
    - 如果请求体为空，Spring 会报 400 错误。
        

---

## 2. **前端没传参时，后端参数的值是什么？**

取决于参数类型：

- **基本类型**（`int`、`long`、`boolean` 等）：  
    默认值是 **0 / false**，因为 Java 基本类型不能为 null。  
    如果没传，Spring 会直接用默认值，或者直接报错（看注解）。
    
- **包装类型**（`Integer`、`Long`、`Boolean` 等）：  
    没传时 = `null`。
    
- **对象（POJO）**：  
    没传对应字段时，那个字段就是 `null`；  
    如果整个对象没传（也没加 `@RequestBody`），Spring 会创建一个空对象，属性全是 null。
    

---

## 3. **@RequestBody 要不要加 `required=false`？**

- 默认 `@RequestBody(required = true)`：  
    如果请求体缺失（body 是空的），Spring 会报错 400。
    
- 可以写成 `@RequestBody(required = false)`：  
    这样如果前端没传 body，对应参数就是 null。
    

⚠️ 但实际开发里一般不这么用，因为 POST 请求大多数时候 body 是必须的。

---

## 4. **@ModelAttribute 是什么？**

- `@ModelAttribute` 用于告诉 Spring：参数要从 **请求参数**（query string + form-data）里取，并且绑定到对象属性。
    
- 如果没写注解，POJO 参数默认也相当于 `@ModelAttribute`。
    
- 例子：
    

```java
@PostMapping("/user")
public String createUser(@ModelAttribute User user) {
    ...
}
```

请求：

```
POST /user
Content-Type: application/x-www-form-urlencoded

name=Tom&age=18
```

Spring 会自动封装成：

```java
user.name = "Tom"
user.age = 18
```

---

## 5. **总结对比表**

|场景|不加注解|@RequestParam|@RequestBody|@ModelAttribute|
|---|---|---|---|---|
|**简单类型**|从 query/form 取值|从 query/form 取值|❌（会报错，不能映射到 body）|不常用|
|**POJO 对象**|相当于 @ModelAttribute（从 query/form 取值）|❌|从 JSON body 反序列化|从 query/form 取值|
|**没传参数**|简单类型=0/null；对象属性=null|报错（除非 `required=false`）|报错（除非 `required=false`）|对象创建成功，属性=null|

---

✅ 所以你在 CXF → Spring MVC 改造时，可以遵循：

1. **Query 参数** → `@RequestParam(required=false)` 或直接用 POJO（等价于 @ModelAttribute）。
    
2. **请求体 JSON** → `@RequestBody`。
    
3. 如果原来参数可能缺省，一定要注意 `required=false` 或用包装类型。
    
