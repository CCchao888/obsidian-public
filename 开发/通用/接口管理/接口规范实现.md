# 一、接口规范

## Swagger / OpenAPI 是什么？

- **Swagger（现称 OpenAPI）** 是一个接口规范 + 工具集，最初由 Swagger 团队提出，后来由 Linux 基金会接管并命名为 **OpenAPI Specification (OAS)**。
    
- 它的核心作用是：用标准格式（通常是 `swagger.yaml` / `swagger.json`）**描述后端 REST API 的行为、参数、返回结构**，并能生成接口文档 + UI 页面。
    
- 通过注解（如 `@Api`, `@ApiOperation`, `@ApiParam`），自动生成接口文档，极大减轻了人工维护文档的成本。

# 二、经典实现

## IDEA + Swagger + YApi 的协作流程

我们把整个协作过程分为 5 步，并说明每个工具的角色：

| 步骤         | 工具                      | 说明                                               |
| ---------- | ----------------------- | ------------------------------------------------ |
| ① 设计接口     | IDEA + Swagger 注解       | 在 Spring Boot 项目中，通过 Java 注解编写接口（配合 controller）。 |
| ② 接口文档生成   | Swagger UI / OpenAPI 文档 | 通过注解自动生成接口页面和 JSON 接口定义文档。                       |
| ③ 上传到 YApi | YApi 插件 / openapi 导入    | 将 Swagger 生成的 OpenAPI 文档上传到 YApi 平台供前端查看、调试。     |
| ④ 前后端协作    | YApi                    | 前端人员查看、联调接口，自动生成请求代码等。                           |
| ⑤ 接口测试     | YApi / Apifox / Postman | 提供 mock、调试、断言测试等功能                               |

---

## ✍️ 详细举例说明（基于 Spring Boot 项目）

### ✅ 1. 在 IDEA 中使用 Swagger 注解接口

引入依赖（以 Springfox Swagger 为例）：
```
<!-- Springfox Swagger 3 -->
<dependency>
  <groupId>io.springfox</groupId>
  <artifactId>springfox-boot-starter</artifactId>
  <version>3.0.0</version>
</dependency>

```

添加配置类：
```
@Configuration
@EnableOpenApi
public class SwaggerConfig {
    @Bean
    public Docket api() {
        return new Docket(DocumentationType.OAS_30)
            .select()
	       .apis(RequestHandlerSelectors.basePackage("com.example.controller"))
            .paths(PathSelectors.any())
            .build();
    }
}

```

控制器使用注解：
```
@RestController
@RequestMapping("/user")
@Api(tags = "用户接口")
public class UserController {

    @GetMapping("/{id}")
    @ApiOperation("根据用户ID获取用户信息")
    public User getUser(@PathVariable("id") Long id) {
        return new User(id, "张三");
    }
}

```

---

### ✅ 2. 生成 Swagger UI 页面 + OpenAPI 文档

访问：

- UI 文档页面：`http://localhost:8080/swagger-ui/index.html`
    
- 接口定义文档（JSON）：`http://localhost:8080/v3/api-docs`
    

---

### ✅ 3. 上传 Swagger 文档到 YApi

YApi 支持通过 Swagger/OpenAPI 文档导入：

- 方法一：在 YApi 项目中点击「数据导入」→「OpenAPI (Swagger v3)」
    
- 方法二：使用 [YApi 插件](https://github.com/YMFE/yapi) 的自动同步脚本，将接口文档上传到 YApi。  
    你只需要提供接口地址（如 `http://localhost:8080/v3/api-docs`）和 token。
    

---

### ✅ 4. 前端联调查看接口文档

YApi 会把导入的接口以可视化形式展示，前端可以：

- 在线查看请求路径、参数、返回值等
    
- 直接测试接口（mock、真实请求）
    
- 一键生成 axios/fetch 请求代码
    

---

## 🧠 一图总结（IDEA + Swagger + YApi）
```
               开发人员
                   ↓
       +----------------------+
       |   IntelliJ IDEA +    |
       |  Swagger 注解（Spring）|
       +----------------------+
                   ↓
      自动生成 Swagger UI 页面和 JSON 文档
                   ↓
     [YApi导入 Swagger 文档（手动/自动）]
                   ↓
       +----------------------+
       |      YApi 平台       |
       |  显示/测试/分享API文档 |
       +----------------------+
                   ↓
         前端联调 + 测试 + Mock

```
---

## 🔧 小技巧与建议

- 企业开发中几乎都是 **后端通过 Swagger 自动生成接口文档 + 上传到 YApi 管理**，保证准确、实时更新。
    
- Swagger 常见库：
    
    - `springfox-swagger`（传统）
        
    - `springdoc-openapi`（现代推荐）
        
- Apifox 也支持导入 swagger.json，适合个人或小团队快速开发。
    

---
## ✅ 总结

|工具|作用|
|---|---|
|**Swagger/OpenAPI**|用注解自动生成接口文档，是事实标准|
|**IDEA**|编写后端代码，利用 Swagger 注解生成文档|
|**YApi**|可视化管理接口文档，前后端联调平台|

# 三、YApi 插件自动生成 API 文档 vs 使用 Swagger

|比较项|YApi 插件自动生成|Swagger + YApi|
|---|---|---|
|原理|扫描 Java 代码自动上传到 YApi|使用 Swagger 注解生成 OpenAPI JSON 文档|
|配置复杂度|略高（需 token、项目ID）|一般（只需设置 Swagger 接口地址）|
|适合项目|已接入 YApi 的公司项目|通用，支持 Swagger 标准的各种平台|
|是否依赖注解|可以不依赖 Swagger 注解（通过代码扫描）|依赖 `@Api`, `@ApiOperation` 等注解|
