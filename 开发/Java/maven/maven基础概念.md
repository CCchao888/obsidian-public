### 1. SNAPSHOT 版本 vs Release 版本

这是Maven版本管理的基石，理解它们之间的区别至关重要。

| 特性          | **SNAPSHOT (快照) 版本**                                                                                  | **Release (发布) 版本**                                                           |
| :---------- | :---------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------- |
| **含义**      | 代表**正在活跃开发中、不稳定的**版本。                                                                                 | 代表一个**稳定、不可变的**发布版本。                                                          |
| **版本号**     | 以 `-SNAPSHOT` 结尾，例如 `1.0.0-SNAPSHOT`, `2.1.0-SNAPSHOT`。                                               | 纯数字或带有其他后缀（但不含`SNAPSHOT`），例如 `1.0.0`, `2.1.0-RELEASE`。                        |
| **可变性**     | **可变的**。你今天部署的 `1.0.0-SNAPSHOT` 和明天部署的 `1.0.0-SNAPSHOT` 可以是完全不同的代码。                                   | **不可变的**。一旦 `1.0.0` 被发布到Release仓库，你就永远不能修改它。如果你修复了一个bug，必须发布一个新版本，例如 `1.0.1`。 |
| **Maven行为** | 当依赖SNAPSHOT版本时，Maven 对 SNAPSHOT 版本默认会按更新策略（如 daily）定期检查是否有新版本。如果使用 `-U` 参数，Maven 将强制获取最新的 SNAPSHOT 包。 | 当依赖Release版本时，Maven一旦在本地仓库下载了该版本，就**永远不会**再去远程仓库检查更新，除非你手动删除本地缓存。             |
| **使用场景**    | **开发阶段、测试环境**。用于团队内部协作，让其他开发者能方便地获取你最新的代码进行联调。                                                        | **生产环境、正式发布**。保证生产环境的稳定性和可追溯性。`任何一个Release版本都应该对应一个特定的Git Tag。`               |

**简单比喻：**
-   **SNAPSHOT** 就像一本正在写的书的**草稿**，作者每天都在修改，你可以随时看到最新的草稿内容。
-   **Release** 就像这本书的**正式印刷版**（第一版、第二版），一旦印刷就无法更改。如果需要修改，必须出修订版（新版本）。

### **Maven 对 SNAPSHOT 的处理机制**

Maven 会尝试从远程仓库获取最新的 SNAPSHOT 版本，但是是否检查更新 **取决于本地缓存策略**：

|Maven 行为|说明|
|---|---|
|**默认情况下（没有参数配置时）**|Maven 会根据 `updatePolicy` 策略决定是否检查更新，默认是 **每天检查一次 (daily)**|
|**使用 `-U` 参数（force update）**|强制更新所有 SNAPSHOT 依赖，**立即从远程再次下载最新包**|
|**本地已有缓存且未到更新策略时间**|Maven **不会反复立即更新**，会使用本地现有 SNAPSHOT|

```
<repository>
  <id>snapshots</id>
  <url>https://repo.maven.apache.org/maven2</url>
  <releases><enabled>false</enabled></releases>
  <snapshots>
    <enabled>true</enabled>
    <updatePolicy>daily</updatePolicy> <!-- 默认 daily -->
  </snapshots>
</repository>

```
`updatePolicy` 选项：**只对 Maven 从该仓库“下载依赖（resolve dependencies）”时生效**。  它们不控制上传行为（deploy/upload）**。

| 值             | 含义          |
| ------------- | ----------- |
| `always`      | 每次构建都检查更新   |
| `daily`       | 每天检查一次（默认）  |
| `interval:10` | 每 10 分钟检查一次 |
| `never`       | 永不检查更新      |