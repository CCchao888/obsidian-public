下面我给你一个**真正可落地、互联网公司都在用**的「项目版本号管理方法」，从一个版本的开始开发 → 测试 → 上线，全流程包含：

- **版本号怎么定**
    
- **开发阶段如何管理 SNAPSHOT**
    
- **什么时候升版本**
    
- **如何让多人协作不乱掉**
    


---

# 🧠 一句话总结核心原则

> **主干（main）永远保持 RELEASE**  
> **分支开发使用 SNAPSHOT**  
> **上线前 lock 版本 → 发布 RELEASE → main 升版本**

---

# 🚀 推荐的版本号管理流程（成熟团队通用）

以下流程假设你用 `major.minor.patch` 语义化版本（1.2.3）。

## ① 新版本开始开发 —— 升为 SNAPSHOT

一个版本开始迭代时，**先在主分支 main 升一个新版本 + SNAPSHOT**：

例如上一版本为 `1.2.0`：

开始开发新版本时：

```
1.3.0-SNAPSHOT
```

主分支现在是：

```xml
<version>1.3.0-SNAPSHOT</version>
```

### 为什么？

- 表示当前代码不稳定
    
- 允许团队拉取 SNAPSHOT 联调
    
- 避免误当成正式版本
    

---

## ② 整个开发周期 —— 保持同一个 SNAPSHOT

开发过程（拉分支/合 PR/联调/集成）都不用改版本号。

一直保持：

```
1.3.0-SNAPSHOT
```

原则：

- **不要**多人乱改 SNAPSHOT 的版本号
    
- **不要**在 feature 分支改版本号
    

一个迭代，只有一个 SNAPSHOT 版本。

---

## ③ 进入预发布阶段（SIT/UAT）—— 拆分出 Release Branch


```
UT → SIT → UAT → 准生产 → 生产
```

建议在 **进入 UAT 前** 创建 release 分支：

```
release/1.3.0
```

然后把分支上的版本号从：

```
1.3.0-SNAPSHOT
```

改为：

```
1.3.0
```

### 为什么？

- release 分支可以做小修改（bugfix）
    
- 主分支仍然可以继续下个版本的开发
    

---

## ④ 发布正式版本 —— RELEASE + Tag

准备上生产时：

在 release 分支：

```
mvn clean deploy -Prelease
```

构建产物生成：

- `1.3.0.jar`
    
- `1.3.0.pom`
    

并给 Git 打 tag：

```
v1.3.0
```

tag 用于未来回滚、溯源、定位问题。

---

## ⑤ 发布后 —— main 升下一个版本的 SNAPSHOT

发完版本后，把 main 分支版本号升到下一个：

```
1.3.1-SNAPSHOT 或者 1.4.0-SNAPSHOT
```

（视情况决定是小版本还是大版本）

这表示新迭代开始了。

---

# 📌 全流程图（非常清晰）

```
main 分支：
 1.2.0（旧版本）
 ↓ 开始新迭代
 1.3.0-SNAPSHOT（开发中）
 | feature 分支开发、联调
 | 合并回 main（仍是 1.3.0-SNAPSHOT）
 ↓ UAT 前
创建 release/1.3.0 分支
    修改版本 → 1.3.0（RELEASE）
    修bug...
 ↓ 上生产
打 tag：v1.3.0
部署上线
 ↓ main 分支升版本
1.4.0-SNAPSHOT（开始下一迭代）
```

---

# 🎯 这套方法的优势

|优点|说明|
|---|---|
|版本号唯一且明确|每次迭代只有一个 SNAPSHOT 和一个 RELEASE|
|不乱|不会因为多开发人员导致版本号冲突|
|易溯源|每个上线版本都有 tag|
|与 Maven 机制匹配|SNAPSHOT → 不稳定开发 RELEASE → 最终发布|
|配合 CI/CD 最方便|各环境可单独选择拉 SNAPSHOT 或 RELEASE|

---

# 📦 推荐的版本号原则（语义化版本 Semantic Versioning）

```
MAJOR.MINOR.PATCH
```

- **MAJOR**：不兼容变更
    
- **MINOR**：功能新增但兼容
    
- **PATCH**：兼容性 bug 修复
    



- 小改动：升 patch
    
- 新功能：升 minor
    
- 架构调整：升 major
    

---

# ✔️ 如果你愿意，我可以继续提供

### 📌 实战增强包（可选）

- 一般大厂）内适配的 Git Flow + Maven Flow 完整示例
    
- 自动化脚本：自动升版本、自动生成 tag、自动改 POM
    
- 提供一个「版本号管理模板文档」你可以直接用于团队规范
    

告诉我你想要哪部分，我帮你做成文档也可以。