
# ğŸ” æ·±å…¥ç†è§£ npm ä¾èµ–ç®¡ç†ï¼šè®¾è®¡å“²å­¦ä¸æœ€ä½³å®è·µ


## 1. ä¸ºä»€ä¹ˆè¦æœ‰ dependencies å’Œ devDependencies ä¹‹åˆ†ï¼Ÿ

**ä¸€å¥è¯å›ç­”ï¼šä¸ºäº†ä¼˜åŒ–ç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚**

è¿™ä¸æ˜¯çæŠ˜è…¾ï¼Œè€Œæ˜¯æœ‰ç€éå¸¸é‡è¦çš„å®é™…æ„ä¹‰ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªåœºæ™¯æ¥ç†è§£ï¼š

å‡è®¾ä½ å¼€å‘äº†ä¸€ä¸ª Vue å‰ç«¯é¡¹ç›®ï¼Œéœ€è¦ç”¨åˆ°ï¼š
- `vue` (è¿è¡Œæ—¶éœ€è¦)
- `webpack` (æ‰“åŒ…æ—¶éœ€è¦)
- `eslint` (ä»£ç æ£€æŸ¥æ—¶éœ€è¦)

### å¦‚æœæ²¡æœ‰åŒºåˆ†ä¼šæ€æ ·ï¼Ÿ
å½“ä½ éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨æ—¶ï¼Œä½ ä¼šæ‰§è¡Œ `npm install`ï¼Œç„¶åæ‰€æœ‰åŒ…éƒ½ä¼šè¢«ä¸‹è½½å®‰è£…ï¼ŒåŒ…æ‹¬ `webpack` å’Œ `eslint`ã€‚ä½†è¿™ä¼šå¯¼è‡´ï¼š
1.  **éƒ¨ç½²åŒ…ä½“ç§¯å·¨å¤§**ï¼šç”Ÿäº§ç¯å¢ƒæ ¹æœ¬ç”¨ä¸åˆ°çš„å¼€å‘å·¥å…·å ç”¨äº†å¤§é‡ç©ºé—´
2.  **æ½œåœ¨å®‰å…¨é£é™©**ï¼šæ›´å¤šçš„åŒ…æ„å‘³ç€æ›´å¤§çš„æ”»å‡»é¢
3.  **å®‰è£…æ—¶é—´æ›´é•¿**ï¼šéœ€è¦ä¸‹è½½ä¸å¿…è¦çš„åŒ…

### æœ‰äº†åŒºåˆ†åçš„ä¼˜åŠ¿ï¼š
```bash
# å¼€å‘ç¯å¢ƒï¼šå®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬å¼€å‘å·¥å…·ï¼‰
npm install

# ç”Ÿäº§ç¯å¢ƒï¼šåªå®‰è£…è¿è¡Œæ—¶å¿…éœ€çš„ä¾èµ–
npm install --production
# æˆ–è€…é€šè¿‡ç¯å¢ƒå˜é‡
NODE_ENV=production npm install
```

è¿™æ ·åœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Šï¼Œåªæœ‰ `dependencies` ä¸­çš„åŒ…ä¼šè¢«å®‰è£…ï¼Œ`devDependencies` ä¸­çš„åŒ…ä¼šè¢«å¿½ç•¥ã€‚

### å¦‚ä½•æ­£ç¡®åŒºåˆ†ï¼Ÿ
| ä¾èµ–ç±»å‹ | æ”¾ç½®ä½ç½® | ç¤ºä¾‹ | å®‰è£…æ–¹å¼ |
| :--- | :--- | :--- | :--- |
| **ç”Ÿäº§ä¾èµ–** | `dependencies` | `vue`, `react`, `axios`, `lodash` | `npm install package-name -S` |
| **å¼€å‘ä¾èµ–** | `devDependencies` | `webpack`, `vite`, `eslint`, `jest` | `npm install package-name -D` |

**ç®€å•åˆ¤æ–­åŸåˆ™**ï¼šå¦‚æœä½ çš„é¡¹ç›®ä»£ç ï¼ˆåŒ…æ‹¬æ‰“åŒ…åçš„ä»£ç ï¼‰ä¸­é€šè¿‡ `import`/`require` å¼•ç”¨äº†è¿™ä¸ªåŒ…ï¼Œå®ƒå°±åº”è¯¥æ˜¯ç”Ÿäº§ä¾èµ–ï¼Œå¦åˆ™å°±åº”è¯¥æ˜¯å¼€å‘ä¾èµ–ã€‚

## 2. package-lock.json çš„æ›´æ–°æœºåˆ¶

### npm å¦‚ä½•å¤„ç† package-lock.jsonï¼Ÿ
ä½ çš„ç†è§£åŸºæœ¬æ­£ç¡®ï¼Œä½†éœ€è¦æ›´ç²¾ç¡®çš„æè¿°ï¼š

1.  **npm ç¡®å®ä¼˜å…ˆæŸ¥çœ‹ package-lock.json**ï¼šå½“ä½ è¿è¡Œ `npm install` æ—¶ï¼Œnpm ä¼šä¼˜å…ˆæŒ‰ç…§ lockfile ä¸­çš„ç²¾ç¡®ç‰ˆæœ¬å®‰è£…ã€‚
2.  **ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´æ–° lockfileï¼Ÿ**
    - **æ‰‹åŠ¨ä¿®æ”¹äº† package.json** ä¸­çš„ç‰ˆæœ¬èŒƒå›´å¹¶æ‰§è¡Œ `npm install`
    - **ç›´æ¥è¿è¡Œ `npm update`**ï¼šè¿™ä¼šå°è¯•æŒ‰ç…§ package.json ä¸­çš„ç‰ˆæœ¬èŒƒå›´æ›´æ–°åŒ…ï¼Œå¹¶æ›´æ–° lockfile
    - **åˆ é™¤ package-lock.json åè¿è¡Œ `npm install`**ï¼šä¼šé‡æ–°ç”Ÿæˆ
3.  **å¦‚ä½•é¿å…æ„å¤–æ›´æ–°ï¼Ÿ**
    ```bash
    # ä½¿ç”¨ ci å‘½ä»¤ï¼Œä¸¥æ ¼æŒ‰ lockfile å®‰è£…ï¼Œå¦‚æœ‰å·®å¼‚ä¼šæŠ¥é”™
    npm ci
    
    # æˆ–è€…ä½¿ç”¨ --no-save å‚æ•°é˜²æ­¢æ›´æ–° lockfile
    npm install --no-save
    ```

### å¦‚æœ package.json ä¿®æ”¹äº†ï¼Œä¼šä½¿ç”¨æ—§ç‰ˆæœ¬å—ï¼Ÿ
**ä¸ä¼šï¼** è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„è¡Œä¸ºå˜åŒ–ï¼š

-   å¦‚æœä½ æ‰‹åŠ¨ä¿®æ”¹äº† `package.json` ä¸­çš„ç‰ˆæœ¬èŒƒå›´ï¼ˆæ¯”å¦‚ä» `"vue": "^3.2.0"` æ”¹ä¸º `"vue": "^3.3.0"`ï¼‰ï¼Œç„¶åè¿è¡Œ `npm install`
-   npm ä¼šæ£€æµ‹åˆ°è¿™ä¸ªå˜åŒ–ï¼Œä¼šå°è¯•å®‰è£…ç¬¦åˆæ–°èŒƒå›´çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶**æ›´æ–° package-lock.json**
-   å¦‚æœä½ å¸Œæœ›ä¿æŒ lockfile ä¸å˜ï¼Œåº”è¯¥ä½¿ç”¨ `npm install --no-save`

## 3. å…¨å±€æ¨¡å—çš„å­˜å‚¨ä¸é…ç½®

### å…¨å±€æ¨¡å—çš„é»˜è®¤ä½ç½®
| æ“ä½œç³»ç»Ÿ | é»˜è®¤å…¨å±€è·¯å¾„ | é»˜è®¤ç¼“å­˜è·¯å¾„ |
| :--- | :--- | :--- |
| **Windows** | `%APPDATA%\npm` | `%APPDATA%\npm-cache` |
| **macOS/Linux** | `/usr/local/lib/node_modules` | `~/.npm` |

### ä¸ºä»€ä¹ˆè¦ä¿®æ”¹é»˜è®¤ä½ç½®ï¼Ÿå¦‚ä½•é…ç½®ï¼Ÿ
**ä¸ºä»€ä¹ˆä¿®æ”¹**ï¼šé»˜è®¤ä½ç½®é€šå¸¸åœ¨ç³»ç»Ÿç›˜ï¼ˆCç›˜ï¼‰ï¼Œä¿®æ”¹åˆ°å…¶ä»–ç›˜å¯ä»¥ï¼š
1.  èŠ‚çœç³»ç»Ÿç›˜ç©ºé—´
2.  é¿å…æƒé™é—®é¢˜ï¼ˆç‰¹åˆ«æ˜¯ Windowsï¼‰
3.  ç»Ÿä¸€ç®¡ç†

**å¦‚ä½•é…ç½®ç¯å¢ƒå˜é‡**ï¼š
```bash
# 1. è®¾ç½®æ–°çš„å…¨å±€æ¨¡å—å®‰è£…ç›®å½•
npm config set prefix "D:\nodejs\node_global"

# 2. è®¾ç½®æ–°çš„ç¼“å­˜ç›®å½•
npm config set cache "D:\nodejs\node_cache"

# 3. æŸ¥çœ‹å½“å‰é…ç½®
npm config list

# 4. å°†æ–°è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ PATH ä¸­
# è¿™æ˜¯å…³é”®ä¸€æ­¥ï¼å¦åˆ™ç³»ç»Ÿæ‰¾ä¸åˆ°å…¨å±€å‘½ä»¤
```

**ç¯å¢ƒå˜é‡é…ç½®æ­¥éª¤ï¼ˆWindowsï¼‰**ï¼š
1.  å³é”®ç‚¹å‡»"æ­¤ç”µè„‘" â†’ "å±æ€§" â†’ "é«˜çº§ç³»ç»Ÿè®¾ç½®"
2.  ç‚¹å‡»"ç¯å¢ƒå˜é‡"
3.  åœ¨"ç³»ç»Ÿå˜é‡"ä¸­æ‰¾åˆ°æˆ–æ–°å»º `PATH` å˜é‡
4.  æ·»åŠ æ–°å€¼ï¼š`D:\nodejs\node_global`
5.  é‡å¯å‘½ä»¤è¡Œç»ˆç«¯ä½¿å…¶ç”Ÿæ•ˆ

**éªŒè¯é…ç½®æ˜¯å¦æˆåŠŸ**ï¼š
```bash
# å®‰è£…ä¸€ä¸ªå…¨å±€åŒ…æµ‹è¯•
npm install -g @vue/cli

# æ£€æŸ¥åŒ…æ˜¯å¦å®‰è£…åˆ°äº†æ–°ä½ç½®
which vue  # macOS/Linux
where vue  # Windows

# å°è¯•è¿è¡Œå‘½ä»¤
vue --version
```

## 4. å¤šç‰ˆæœ¬ Node.js ä¸‹çš„å…¨å±€æ¨¡å—éš”ç¦»

è¿™æ˜¯ä½ ä¹‹å‰å›°æƒ‘çš„é‡ç‚¹ï¼Œæˆ‘ç”¨ä¸€ä¸ªæ¸…æ™°çš„å›¾ç¤ºæ¥å±•ç¤º nvm æ˜¯å¦‚ä½•ç®¡ç†ä¸åŒ Node.js ç‰ˆæœ¬çš„å…¨å±€ç©ºé—´çš„ï¼š

```mermaid
flowchart TD
    subgraph NVM["nvm ç®¡ç†èŒƒç•´"]
        direction LR
        N18[Node.js v18.x]
        N16[Node.js v16.x]
    end

    subgraph G18[Node v18 çš„ç‹¬ç«‹å…¨å±€ç©ºé—´]
        VUE18[vue-cli@5.x]
        NEST18[@nestjs/cli@10.x]
        NG18[é…ç½® registry, prefixç­‰]
    end

    subgraph G16[Node v16 çš„ç‹¬ç«‹å…¨å±€ç©ºé—´]
        VUE16[vue-cli@4.x]
        ANGULAR16[@angular/cli@12.x]
        NG16[é…ç½® registry, prefixç­‰]
    end

    N18 --> G18
    N16 --> G16

    style G18 fill:#e1f5fe
    style G16 fill:#fff3e0
```

### å…³é”®ç»“è®ºï¼š
1.  **å®Œå…¨éš”ç¦»**ï¼šæ¯ä¸ª Node.js ç‰ˆæœ¬éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å…¨å±€æ¨¡å—ç©ºé—´å’Œ npm é…ç½®
2.  **éœ€è¦å•ç‹¬é…ç½®**ï¼šå½“ä½ ç”¨ nvm å®‰è£…ä¸€ä¸ªæ–° Node ç‰ˆæœ¬åï¼Œéœ€è¦é‡æ–°è®¾ç½®å®ƒçš„ npm configï¼ˆå¦‚ registryã€prefixï¼‰
3.  **éœ€è¦é‡æ–°å®‰è£…å·¥å…·**ï¼šåœ¨æ–°ç‰ˆæœ¬ä¸‹éœ€è¦é‡æ–°å®‰è£…å…¨å±€å·¥å…·ï¼ˆå¦‚ vue-cliã€create-react-appï¼‰

## ğŸ¯ æ“ä½œæ¸…å•

1.  **æ£€æŸ¥å½“å‰ç¯å¢ƒ**ï¼š
    ```bash
    node --version
    npm --version
    npm config list
    ```

2.  **å¦‚æœéœ€è¦é…ç½®æ–°ä½ç½®**ï¼š
    ```bash
    # è®¾ç½®æ–°çš„å…¨å±€ç›®å½•å’Œç¼“å­˜ç›®å½•
    npm config set prefix "D:\nodejs\node_global"
    npm config set cache "D:\nodejs\node_cache"
    
    # è®¾ç½®æ·˜å®é•œåƒ
    npm config set registry https://registry.npmmirror.com/
    ```

3.  **ä¸è¦å¿˜è®°**ï¼šå°†æ–°é…ç½®çš„å…¨å±€ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿçš„ `PATH` ç¯å¢ƒå˜é‡ä¸­

4.  **å®‰è£…é¡¹ç›®ä¾èµ–**ï¼š
    ```bash
    # è¿›å…¥é¡¹ç›®ç›®å½•
    cd your-project
    
    # å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬å¼€å‘ä¾èµ–ï¼‰
    npm install
    ```

5.  **å¦‚æœé‡åˆ°æƒé™é—®é¢˜**ï¼ˆç‰¹åˆ«æ˜¯åœ¨ macOS/Linuxï¼‰ï¼š
    ```bash
    # ä¸è¦ä½¿ç”¨ sudoï¼è€Œæ˜¯ä¿®å¤ç›®å½•æƒé™
    sudo chown -R $USER /usr/local/lib/node_modules
    # æˆ–è€…æ›´å¥½çš„é€‰æ‹©ï¼šä½¿ç”¨ä¿®æ”¹åçš„å‰ç¼€è·¯å¾„
    ```






